# PortAI Nexus 平台阶段成果说明

**版本: v2.1**
**日期: 2026年02月09日**
**作者: Manus AI**

---

## 1. 平台概述

**PortAI Nexus** (内部代号：西联智能平台) 是一个面向工业领域的综合性 AI 平台。它旨在整合从设备接入、数据处理、模型训练与推理到业务运营的全链路能力，提供一个统一、高效、智能的解决方案。平台采用先进的微服务与事件驱动架构，支持云原生部署，具备高度的可扩展性和可靠性。

经过近期的密集开发、重构与问题修复，平台 v2.1 版本在**架构清晰度、代码健壮性和功能完整性**上取得了显著进展。核心的路由问题、路径解析错误已得到根除，项目目录结构和 Git 历史已被全面清理，为后续的迭代开发奠定了坚实的基础。

## 2. 平台架构

平台采用前后端分离的 **Monorepo** 模式进行管理，并通过 **Polyglot Microservices** (多语言微服务) 架构整合了不同技术栈的优势，以应对复杂的工业场景需求。

### 2.1. 技术栈

平台选用了一系列业界领先的开源技术，以确保其高性能、高可用性和可维护性。

| 分类 | 技术 | 用途 |
| :--- | :--- | :--- |
| **前端** | React, TypeScript, Vite, tRPC | 构建响应式、类型安全的用户界面，提供卓越的开发体验。 |
| | TailwindCSS, Shadcn/ui | 实现现代化、可定制的设计系统。 |
| **后端** | Node.js, Express, tRPC | 作为主要的业务逻辑和 API 网关，提供端到端的类型安全。 |
| **数据库** | MySQL, Drizzle ORM | 主要的关系型数据存储，使用现代化的 ORM 进行交互。 |
| | Redis, ClickHouse, Qdrant, Neo4j | 分别用于缓存、实时分析、向量检索和图数据分析。 |
| **消息队列** | Kafka | 作为平台事件总线，解耦各个服务，实现异步通信。 |
| **AI / ML** | Ollama, PyTorch, TensorRT | 支持本地大模型运行、模型训练与边缘推理加速。 |
| **微服务** | Go, Rust | 用于开发高性能的 I/O 密集型（如事件分发）和计算密集型（如数据处理）服务。 |
| **DevOps** | Docker, Docker Compose, Kubernetes | 实现容器化部署、本地一键启动和云原生编排。 |
| **安全** | Gitleaks, Semgrep, Trivy, Vault | 集成代码扫描、密钥管理等安全工具，保障平台安全。 |

### 2.2. 代码结构

项目代码结构清晰，职责分明，体现了“关注点分离”的设计原则。

- **`client/`**: 前端应用，包含页面 (`pages`)、组件 (`components`) 和状态管理 (`stores`)。
- **`server/`**: 后端核心，采用分层设计，包含 `api` (tRPC 路由)、`services` (业务逻辑)、`lib` (通用库)、`core` (核心服务) 和 `jobs` (后台任务)。
- **`src/`**: 存放 Go 和 Rust 实现的独立微服务模块，通过 gRPC 或消息队列与主后端通信。
- **`drizzle/`**: 数据库 Schema 定义和 Drizzle ORM 自动生成的迁移脚本。
- **`shared/`**: 前后端共享的类型定义和常量，确保数据结构的一致性。
- **`docker-compose.yml`**: 定义了包含 15 个核心服务和 10 个数据卷的完整本地开发环境，实现一键启动。

## 3. 功能清单

平台功能丰富，覆盖了从底层资产管理到上层智能应用的多个层面。以下是核心功能的实现状态：

| 一级菜单 | 二级/三级菜单 | 功能页面 | 实现状态 | 备注 |
| :--- | :--- | :--- | :--- | :--- |
| **首页概览** | - | Dashboard | **已实现** | 实时展示系统核心指标、服务状态和快捷入口。 |
| **资产与数据** | 知识库 | 知识管理 | **已实现** | 支持文档上传、向量化处理和 RAG 检索。 |
| | | 知识图谱 | **已实现** | 可视化展示实体和关系。 |
| | | 向量管理 | **已实现** | 对接 Qdrant，管理向量集合。 |
| | 数据库 | 数据库工作台 | **已实现** | **核心功能**。提供 SQL 编辑、表结构管理、数据浏览和 REST API 自动生成。 |
| | | 设备档案 | **已实现** | 管理核心资产数据。 |
| **智能引擎** | 模型中心 | 模型管理 | **已实现** | **核心功能**。管理平台所有 AI 模型，支持从 Ollama 同步。 |
| | | AI 对话 | **已实现** | 提供与已加载模型进行对话的界面。 |
| | 智能诊断 | 智能体诊断 | **已实现** | - |
| | 进化引擎 | - | (多个页面) | *占位页面* | 预留了主动学习、自动训练等高级功能入口。 |
| **平台管理** | 设计工具 | Pipeline 编排 | **已实现** | **核心功能**。通过拖拽方式构建数据处理和分析流程。 |
| | | 数据流监控 | **已实现** | 实时监控 Kafka 数据流。 |
| | | 图查询优化 | **已实现** | - |
| | 配置中心 | 基础设施 | **已实现** | 管理和监控底层服务（如数据库、消息队列）。 |
| | 状态监控 | 系统拓扑 | **已实现** | **核心功能**。自动发现和可视化展示系统中的服务节点及其连接关系。 |
| | | 可观测性 | **已实现** | 集成 Prometheus 和 Grafana，提供监控仪表盘。 |
| | 安全运维 | 运维概览 | **已实现** | - |

> **注**: “占位页面”是指功能已规划但尚未开发，目前由一个统一的组件进行展示。

## 4. 部署与运行

平台提供了两种主要的部署和运行方式：**本地开发模式**和 **Docker 容器化部署**。

### 4.1. 本地开发

此方式适用于快速开发和调试，直接在本地机器上运行 Node.js 服务和前端应用。

**环境要求:**
- Node.js (v20+)
- pnpm (v10+)
- Git

**运行命令:**

```bash
# 1. 克隆项目到本地
git clone https://github.com/rz790610-bit/xilian-platform.git
cd xilian-platform

# 2. 安装依赖
pnpm install

# 3. 配置环境变量 (复制模板并按需修改)
cp .env.local.template .env.local

# 4. 运行开发服务器 (前端 + 后端)
pnpm dev
```

服务启动后，默认可在 `http://localhost:3000` 访问。

### 4.2. Docker 容器化部署

此方式通过 Docker Compose 将平台及其所有依赖（数据库、消息队列等）打包成容器，实现一键启动，保证环境一致性。

**环境要求:**
- Docker
- Docker Compose

**运行命令:**

```bash
# 在项目根目录执行

# 1. 构建并启动所有服务（首次运行或代码更新后）
docker-compose up --build -d

# 2. 查看服务状态
docker-compose ps

# 3. 停止所有服务
docker-compose down
```

## 5. 核心命令参考

| 命令 | 描述 |
| :--- | :--- |
| `pnpm dev` | 启动本地开发服务器（前端 + 后端，支持热重载）。 |
| `pnpm build` | 构建生产版本的前端和后端代码到 `dist/` 目录。 |
| `pnpm start` | 在生产模式下运行已构建的应用 (`node dist/index.js`)。 |
| `pnpm test` | 运行所有单元测试和集成测试。 |
| `pnpm lint` | 对代码进行静态检查和格式化。 |
| `pnpm db:generate` | 根据 `drizzle/schema.ts` 生成数据库迁移脚本。 |
| `pnpm db:migrate` | 执行所有未应用的数据库迁移。 |
| `pnpm db:studio` | 启动 Drizzle Studio，一个用于浏览和编辑数据库的 Web UI。 |

---

**文档结束**
